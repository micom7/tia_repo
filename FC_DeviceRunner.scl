// ==============================================================================
// FC_DeviceRunner - Виконання механізмів
// ==============================================================================
// Project  : Elevator_System
// Author   : Engineering Team
// Version  : 2.0.0
// Generated: 2026-01-14 15:47:36
// ==============================================================================

FUNCTION "FC_DeviceRunner" : VOID
{ S7_Optimized_Access := 'TRUE' }
VERSION : 1.0

VAR_IN_OUT
    Mechs  : ARRAY[*] OF "UDT_BaseMechanism";
    Redler : ARRAY[*] OF "UDT_Redler";
    Noria  : ARRAY[*] OF "UDT_Noria";
    Gate   : ARRAY[*] OF "UDT_Gate2P";
    Fan    : ARRAY[*] OF "UDT_Fan";
END_VAR

VAR_TEMP
    slot : INT;
    idx  : INT;
END_VAR

BEGIN
    // === REDLERS (slot 0..1) ===
    FOR slot := 0 TO 1 DO
        IF Mechs[slot].DeviceType = TYPE_REDLER THEN
            idx := Mechs[slot].TypedIndex;
            "FC_Redler"(R := Redler[idx], B := Mechs[slot]);
        END_IF;
    END_FOR;
    
    // === NORIAS (slot 50..51) ===
    FOR slot := 50 TO 51 DO
        IF Mechs[slot].DeviceType = TYPE_NORIA THEN
            idx := Mechs[slot].TypedIndex;
            "FC_Noria"(N := Noria[idx], B := Mechs[slot]);
        END_IF;
    END_FOR;
    
    // === GATES (slot 100..101) ===
    FOR slot := 100 TO 101 DO
        IF Mechs[slot].DeviceType = TYPE_GATE2P THEN
            idx := Mechs[slot].TypedIndex;
            "FC_Gate2P"(G := Gate[idx], B := Mechs[slot]);
        END_IF;
    END_FOR;
    
    // === FANS (slot 150..150) ===
    FOR slot := 150 TO 150 DO
        IF Mechs[slot].DeviceType = TYPE_FAN THEN
            idx := Mechs[slot].TypedIndex;
            "FC_Fan"(F := Fan[idx], B := Mechs[slot]);
        END_IF;
    END_FOR;
    
END_FUNCTION
